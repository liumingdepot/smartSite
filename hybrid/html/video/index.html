<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="renderer" content="webkit">
		<title></title>
		<script src="./js/ezuikit.js"></script>
		<style>
			body {
				margin: 0;
			}

			.hint {
				font-size: 14px;
				line-height: 3em;
				color: gray;
			}

			#url,
			#url2,
			#accessToken {
				width: 100%;
			}

			.btn-container {
				margin: 10px;
			}

			.normal {
				color: green;
				margin: 5px;
			}

			.error {
				color: red;
				margin: 5px;
			}
			
			#app{
				display: flex;
				align-items: center;
				justify-content: center;
			}
		</style>
	</head>

	<body>
		<div style="width: 100vw;height: 100vh;background-color: #000000;">
			<div id="app"></div>
		</div>
		<script>
			const search = window.location.search;
			const deviceSerial = getSearchString('deviceSerial', search);
			const channelNo = getSearchString('channelNo', search);
			const name = getSearchString('name', search);
			const accessToken = getSearchString('accessToken', search);
			document.title = name
			//开始初始化监控地址
			const playr = new EZUIKit.EZUIKitPlayer({
				id: 'app',
				url: `ezopen://open.ys7.com/${deviceSerial}/${channelNo}.hd.live`,
				autoplay: true,
				accessToken: accessToken,
				decoderPath: '',
				width: window.outerWidth,
				height: window.outerHeight,
				template: 'security', // simple - 极简版;standard-标准版;security - 安防版(预览回放);voice-语音版；
				autoplay: true,
			});
			function getSearchString(key, Url) {
			    var str = Url;
			    str = str.substring(1, str.length); // 获取URL中?之后的字符（去掉第一位的问号）
			    // 以&分隔字符串，获得类似name=xiaoli这样的元素数组
			    var arr = str.split("&");
			    var obj = new Object();
			    // 将每一个数组元素以=分隔并赋给obj对象 
			    for (var i = 0; i < arr.length; i++) {
			        var tmp_arr = arr[i].split("=");
			        obj[decodeURIComponent(tmp_arr[0])] = decodeURIComponent(tmp_arr[1]);
			    }
			    return obj[key];
			}
		</script>
	</body>
</html>
